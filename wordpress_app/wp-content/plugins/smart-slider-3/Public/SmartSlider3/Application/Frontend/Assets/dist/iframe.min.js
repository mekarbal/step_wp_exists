"function"!=typeof window.n2SSIframeLoader&&(void 0===window.jQuery&&void 0!==window.parent&&(window.jQuery=window.parent.jQuery),function(h){var i=[],t=window.addEventListener?"addEventListener":"attachEvent";function e(t,e){this.i=e,this.frame=t,this.$frame=h(t)}window[t]("attachEvent"==t?"onmessage":"message",function(t){for(var e=0;e<i.length;e++)i[e]&&i[e].match(t.source)&&i[e].message(t[t.message?"message":"data"])}),e.prototype.match=function(t){return t===(this.frame.contentWindow||this.frame.contentDocument)&&(this.frameContent=this.frame.contentWindow||this.frame.contentDocument,!0)},e.prototype.message=function(t){switch(t.key){case"setLocation":"function"==typeof window.zajax_goto?window.zajax_goto(t.location):window.location=t.location;break;case"ready":var e=this.getClientHeight();this.frameContent.postMessage({key:"ackReady",clientHeight:e},"*");break;case"resize":t.fullPage?this.fullpage!==t.fullPage&&(this.fullpage=t.fullPage,this.$verticalOffsetSelectors=h(t.focus.offsetTop).add(t.focus.offsetBottom),this.resizeFullPage(),h(window).on("resize.n2-ss-iframe-"+this.i,this.resizeFullPage.bind(this)),h(window).on("orientationchange.n2-ss-iframe-"+this.i,this.resizeFullPage.bind(this))):this.fullpage=0,this.$frame.css({height:t.height}),t.forceFull&&this.forcefull!==t.forceFull&&(this.forcefull=t.forceFull,h("body").css("overflow-x","hidden"),this.$fullWidthTo=h(".edit-post-visual-editor,.fl-responsive-preview .fl-builder-content"),this.resizeFullWidth(),h(window).on("resize.n2-ss-iframe-"+this.i,this.resizeFullWidth.bind(this)),this.watchWidth())}},e.prototype.watchWidth=function(){if(this.$fullWidthTo.length)if(void 0!==window.ResizeObserver){var e=0;this.observer=new ResizeObserver(function(t){t.forEach(function(t){e!==t.contentRect.width&&(e=t.contentRect.width,this.resizeFullWidth())}.bind(this))}.bind(this)),this.observer.observe(this.$fullWidthTo[0])}else try{this.$resizeObserverIframe=h('<iframe class="bt_skip_resize intrinsic-ignore" title="Resize helper" sandbox="allow-same-origin allow-scripts" style="margin:0 !important;padding:0;border:0;display:block;width:100%;height:0;min-height:0 !important;max-height:0;"></iframe>').on("load",function(t){var i=0,n=h(t.target.contentWindow?t.target.contentWindow:t.target.contentDocument.defaultView).on("resize",function(t){var e=n.width();i!==e&&(i=e,this.resizeFullWidth())}.bind(this))}.bind(this)).appendTo(this.$fullWidthTo[0])}catch(t){}},e.prototype.exists=function(){return!!h.contains(document.body,this.frame)||(i[this.i]=!1,h(window).off(".n2-ss-iframe-"+this.i),this.observer&&(this.observer.unobserve(this.$fullWidthTo[0]),delete this.observer),this.$resizeObserverIframe&&(this.$resizeObserverIframe.remove(),delete this.$resizeObserverIframe),!1)},e.prototype.resizeFullWidth=function(){var t,e,i,n,o,s,r,a;this.exists()&&(n=i=0,t="rtl"===h("html").attr("dir"),this.$fullWidthTo.length&&(i=(e=this.$fullWidthTo[0].getBoundingClientRect()).width,n=t?(document.body.clientWidth||document.documentElement.clientWidth)-e.right:e.left),o=0<i?i:document.body.clientWidth||document.documentElement.clientWidth,r=(s=this.$frame.parent())[0].getBoundingClientRect(),a=-(t?(document.body.clientWidth||document.documentElement.clientWidth)-r.right:r.left)-parseInt(s.css("paddingLeft"))-parseInt(s.css("borderLeftWidth"))+n,this.$frame.css({marginLeft:a,marginRight:a,maxWidth:"none"}).width(o))},e.prototype.resizeFullPage=function(t){if(this.exists()){for(var e=this.getClientHeight(t),i=0;i<this.$verticalOffsetSelectors.length;i++)e-=this.$verticalOffsetSelectors.eq(i).outerHeight();this.frameContent.postMessage({key:"update",clientHeight:e},"*"),this.$frame.height(e)}},e.prototype.getClientHeight=function(t){var e,i,n,o=window.document,s=0;try{window.parent&&window.parent!==window&&(o=window.parent.document)}catch(t){}return window.matchMedia&&/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||window.opera)?(i=!1,n=this.lastOrientation,t&&"orientationchange"===t.type&&(i=!0),e=/iPad|iPhone|iPod/.test(navigator.platform)?o.documentElement.clientHeight:window.innerHeight,window.matchMedia("(orientation: landscape)").matches?(s=Math.min(screen.width,e),90!==n&&(i=!0,this.lastOrientation=90)):(s=Math.min(screen.height,e),0!==n&&(i=!0,this.lastOrientation=0)),!i&&Math.abs(s-this.lastClientHeight)<100?s=this.lastClientHeight:this.lastClientHeight=s):s=o.documentElement.clientHeight||o.body.clientHeight,s},window.n2SSIframeLoader=function(t){i.push(new e(t,i.length))}}(window.jQuery));